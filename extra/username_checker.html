<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Username Checker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            color: #333;
            padding: 20px;
        }
        h1 {
            color: #555;
        }
        textarea, button {
            margin: 10px;
            padding: 10px;
            width: 300px;
        }
        table {
            margin: 20px auto;
            border-collapse: collapse;
            width: 80%;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #f4f4f4;
        }
        .error {
            color: red;
        }
        .available {
            color: green;
            font-weight: bold;
        }
        .unavailable {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Minecraft Username Checker</h1>
    <p>Enter one or more Minecraft usernames below (one per line):</p>
    <textarea id="usernames" rows="10" placeholder="Enter usernames"></textarea><br>
    <button onclick="checkUsernames()">Check Availability</button>
    <table id="resultsTable" style="display: none;">
        <thead>
            <tr>
                <th>Username</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
async function checkUsernames() {
    const usernames = document.getElementById("usernames").value.split("\n")
        .map(name => name.trim().toLowerCase())
        .filter(name => name);

    const resultsTable = document.getElementById("resultsTable");
    const resultsBody = resultsTable.querySelector("tbody");
    resultsBody.innerHTML = ""; 

    if (usernames.length === 0) {
        alert("Please enter at least one username.");
        return;
    }

    resultsTable.style.display = "none";

    for (const username of usernames) {
        const row = document.createElement("tr");
        row.innerHTML = `
            <td>${username}</td>
            <td class="error">Checking...</td>
        `;
        resultsBody.appendChild(row);

        try {
            const response = await fetch(`https://minecraft-render-proxy.onrender.com/check/${username}`);
            if (!response.ok) throw new Error("Failed to fetch data");

            const data = await response.json();

            const statusCell = row.querySelector("td:nth-child(2)");
            const displayName = data.username || username;
            row.querySelector("td:first-child").textContent = displayName;

            if (data.status === "Unclaimed") {
                statusCell.textContent = "✅ Available";
                statusCell.className = "available";
            } else if (data.status === "Claimed") {
                statusCell.textContent = "❌ Taken";
                statusCell.className = "unavailable";
            } else {
                statusCell.textContent = `Error: ${data.status}`;
                statusCell.className = "error";
            }
        } catch (error) {
            console.error(`Error for username "${username}":`, error);
            const statusCell = row.querySelector("td:nth-child(2)");
            statusCell.textContent = "Error";
            statusCell.className = "error";
        }
    }

    resultsTable.style.display = "table";
}
    </script>
</body>
</html>
